<div class="padding-global {{ section.settings.background }}">
  <div class="container-large">
    <div class="padding-section-{{ section.settings.padding }}">
      <div class="{{ section.settings.container }}">
        {%- if section.settings.header != blank -%}
          <div class="margin-bottom margin-medium">
            <h4>
              {{ section.settings.header }}
            </h4>
          </div>
        {%- endif -%}
        <div class="tire-model_sizes-parameters hide-tablet">
          <p class="text-size-small text-weight-semibold">Rozmiar</p>
          <p class="text-size-small text-weight-semibold">Rocznik</p>
          <p class="text-size-small text-weight-semibold">Stan i Bieżnik</p>
          <p class="text-size-small text-weight-semibold">Cena i Ilość</p>
        </div>
        {% assign model_name = metaobject.model.value %}
        {% for product in collections.opony.products %}
          {% assign product_model = product.metafields.tires.model.value.model %}
          {% if product_model == model_name %}
            <div class="tire-model_sizes-product_wrapper">
              <a href="{{ product.url }}" class="tire-model_sizes-product_tittle-wrapper">
                <div class="text-size-large text-weight-bold">{{ product.metafields.tires.manufacturer.value.name }}</div>
                <div>{{ product.metafields.tires.model.value.model }}
                  <span class="text-weight-semibold">{{ product.metafields.tires.width }}/{{ product.metafields.tires.profile }} R{{ product.metafields.tires.diameter }} {{ product.metafields.tires.load_index | slice: 0, 3 | rstrip }}{{ product.metafields.tires.speed_index | slice: 0 }}</span>
                </div>
                {%- if product.metafields.tires.homologation != blank -%}
                  <div class="text-size-tiny text-weight-bold text-color-grayiron600">Homologacja: {{ product.metafields.tires.homologation | map: 'value' | join: ', ' }}</div>
                {%- endif -%}
              </a>
              <div class="text-weight-bold">{{ product.metafields.tires.years }}</div>
              <div class="text-weight-bold">{{ product.metafields.tires.condition }} | {{ product.metafields.tires.tread }}</div>
              <div>
                <div class="text-size-large text-weight-bold">{{ product.price | money }}</div>
                <div>/ {{ product.metafields.tires.quantity }}</div>
              </div>
              <form method="post" action="/cart/add">
                {% comment %} Prevent default action to href /cart {% endcomment %}
                <input type="hidden" name="id" value="{{ product.variants.first.id }}" />
                <input min="1" type="number" id="quantity" name="quantity" value="1"/>
                <input type="submit" value="Kup teraz" class="button is-small" />
                {% comment %} Display modal {% endcomment %}
              </form>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>


{% schema %}
  {
    "name": "Lista Produktów",
    "tag": "section",
    "class": "section_tire-model_sizes",
    "limit": 1,
    "settings": [
      {
        "id": "padding",
        "type": "select",
        "label": "Padding",
        "options": [
          {
            "value": "large",
            "label": "Duży"
          }, {
            "value": "medium",
            "label": "Średni"
          }, {
            "value": "small",
            "label": "Mały"
          }
        ],
        "default": "large"
      }, {
        "id": "background",
        "type": "select",
        "label": "Kolor tła",
        "options": [
          {
            "value": "background-color-white",
            "label": "Biały"
          }, {
            "value": "background-color-grayiron50",
            "label": "Szary"
          }
        ],
        "default": "background-color-white"
      }, {
        "type": "text",
        "id": "header",
        "label": "Tytuł",
        "default": "Polecane Modele Opon"
      }, {
        "type": "select",
        "id": "container",
        "label": "Kontener",
        "options": [
          {
            "value": "white-container",
            "label": "Kontener Biały"
          }, {
            "value": "",
            "label": "Brak Kontenera"
          }, {
            "value": "white-container shadow-small",
            "label": "Kontener z cieniem"
          }
        ],
        "default": "white-container shadow-small"
      }
    ],
    "presets": [
      {
        "name": "Lista Produktów"
      }
    ],
    "blocks": [
      {
        "name": "Produkt",
        "type": "product",
        "settings": [
          {
            "type": "text",
            "id": "model",
            "label": "Model Opony"
          }
        ]
      }
    ]
  }
{% endschema %}


{% stylesheet %}
  .tire-model_sizes-parameters {
    grid-column-gap: 1rem;
    grid-row-gap: 1rem;
    grid-template-rows: auto;
    grid-template-columns: 1.5fr 1fr 1.5fr 1fr 1fr;
    grid-auto-columns: 1fr;
    display: grid;
  }

  .tire-model_sizes-product_wrapper {
    grid-column-gap: 1rem;
    grid-row-gap: 1rem;
    border-bottom: 2px solid var(--color-grayiron--grayiron200);
    grid-template-rows: auto;
    grid-template-columns: 1.5fr 1fr 1.5fr 1fr 1fr;
    grid-auto-columns: 1fr;
    align-items: center;
    padding-top: 1rem;
    padding-bottom: 1rem;
    display: grid;
  }

  .tire-model_sizes-product_tittle-wrapper {
    text-decoration: none;
  }

{% endstylesheet %}