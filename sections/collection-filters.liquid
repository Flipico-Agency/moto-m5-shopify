<section class="section_filters2 background-color-grayiron100">
    <div class="padding-global">
        <div class="container-large">
            <div class="padding-section-small">
                <div class="filters2_component">
                    <div class="filters2_layout">
                        <div class="filters2_tablet-filters-button w-inline-block">
                            {% comment %}
                            <div class="icon-1x1-xsmall button-icon-left"
                                 data-animation-type="lottie"
                                 data-loop="0" data-direction="1" data-autoplay="1" data-is-ix2-target="0"
                                 data-renderer="svg"
                                 data-default-duration="0.5" data-duration="0">
                                <img src="{{ 'IcRoundHelp.svg' | asset_url }}" class="image" alt="filters-icon">
                            </div>
                            {% endcomment %}
                            <div>Filtry</div>
                        </div>
                        <div class="filters2_filters-wrapper">
                            <div class="filters2_form-block w-form">
                                <div class="filters2_form">
                                    <div class="filters2_form-header">
                                        <div class="filters2_heading">Filtry</div>
                                        <div class="button is-link w-inline-block">
                                            <a class="text-clear-filters"
                                               href="{{ collection.url }}?sort_by={{ collection.sort_by }}">WYCZYŚĆ
                                                WSZYSTKIE</a>
                                        </div>
                                    </div>

                                    {% comment %} header filter tabs wg auta & wg rozmiaru{% endcomment %}
                                    <div class="filters2_filter-group">
                                        <div class="filters2_filter-group-heading">
                                            <div class="text-size-medium text-weight-semibold">
                                                Szukaj {{ collection.title }}
                                            </div>
                                        </div>

                                        {% if collection.title != 'Akcesoria' and collection.title != 'Koła dojazdowe'%}
                                            {% comment %} WG ROZMIARU / AUTA MENU {% endcomment %}
                                            <div class="tabs-menu-3 w-tab-menu">
                                                {% assign tab_titles = "wg rozmiaru,wg auta" | split: "," %}
                                                {% for tab_title in tab_titles %}
                                                    <a data-w-tab="{{ forloop.index }}"
                                                       class="tab-link-tab-2 w-inline-block w-tab-link{% if forloop.first %} w--current{% endif %}">
                                                        {{ tab_title }}
                                                    </a>
                                                {% endfor %}
                                            </div>

                                            {% comment %} WG ROZMIARU / AUTA CONTENT {% endcomment %}
                                            {% for tab_number in (1..2) %}
                                                <div class="tab-pane-tab-{{ tab_number }} w-tab-pane{% if tab_number == 1 %} w--tab-active{% endif %}">
                                                    {% comment %} CHECK CLASS {% endcomment %}
                                                    <div class="">
                                                        {% for sub_tab_number in (1..1) %}
                                                            <div data-sub-tab="{{ tab_number }}.{{ sub_tab_number }}"
                                                                 class="w-tab-pane{% if sub_tab_number == 1 %} w--tab-active{% endif %}">
                                                                <div class="w-form">
                                                                    {% comment %} CHECK CLASS {% endcomment %}
                                                                    <form class="tab-content-layout">
                                                                        {% if tab_number == 1 %}
                                                                            {% assign tire_fields_label = "Szerokość,Profil,Średnica" | split: "," %}
                                                                            {% assign wheel_fields_label = "Szerokość,Profil,Średnica,Rozstaw śrub,Szerokość" | split: "," %}
                                                                            {% assign rim_fields_label = "Średnica,Rozstaw śrub,Szerokość,ET" | split: "," %}

                                                                            {% assign season_options = "Letnie,Zimowe,Całoroczne" | split: "," %}

                                                                            {% assign tire_fields_data_name = "tire-width,tire-profile,tire-diameter" | split: "," %}
                                                                            {% assign wheel_fields_data_name = "tire-width,tire-profile,tire-diameter,rim-bolt,rim-width" | split: "," %}
                                                                            {% assign rim_fields_data_name = "rim-diameter,rim-bolt,rim-width,rim-et" | split: "," %}

                                                                            {% assign select_position = "is-left,is-middle,is-right" | split: "," %}

                                                                            {% case collection.title %}
                                                                                {% when 'Opony' %}
                                                                                    <div class="div-block-21-copy">
                                                                                        {% for i in (0..2) %}
                                                                                            <div class="form-field-wrapper">
                                                                                                <label for="{{ tire_fields_data_name[i] | downcase }}"
                                                                                                       class="field-label is-small">{{ tire_fields_label[i] }}</label>
                                                                                                <select
                                                                                                        id="{{ tire_fields_data_name[i] | downcase }}"
                                                                                                        data-name="{{ tire_fields_data_name[i] }}"
                                                                                                        required="required"
                                                                                                        class="select-field w-select {{ select_position[i] }}"></select>
                                                                                                {% render 'select-arrow' %}
                                                                                            </div>
                                                                                        {% endfor %}
                                                                                    </div>
                                                                                {% when 'Koła' %}
                                                                                    <div>Opony</div>
                                                                                    <div style="display: grid; grid-template-columns: repeat(3, 1fr)">
                                                                                        {% for i in (0..2) %}
                                                                                            <div class="form-field-wrapper">
                                                                                                <label for="{{ wheel_fields_data_name[i] | downcase }}"
                                                                                                       class="field-label is-small">{{ wheel_fields_label[i] }}</label>
                                                                                                <select
                                                                                                        id="{{ wheel_fields_data_name[i] | downcase }}"
                                                                                                        data-name="{{ wheel_fields_data_name[i] }}"
                                                                                                        required="required"
                                                                                                        class="select-field w-select {{ select_position[i] }}"></select>
                                                                                                {% render 'select-arrow' %}
                                                                                            </div>
                                                                                        {% endfor %}
                                                                                    </div>
                                                                                    <div>Felgi</div>
                                                                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr)">
                                                                                        {% for i in (3..4) %}
                                                                                            <div class="form-field-wrapper">
                                                                                                <label for="{{ wheel_fields_data_name[i] | downcase }}"
                                                                                                       class="field-label is-small">{{ wheel_fields_label[i] }}</label>
                                                                                                <select
                                                                                                        id="{{ wheel_fields_data_name[i] | downcase }}"
                                                                                                        data-name="{{ wheel_fields_data_name[i] }}"
                                                                                                        required="required"
                                                                                                        class="select-field w-select {% if i == 3 %} {{ select_position[0] }} {% else %} {{ select_position[2] }} {% endif %}"></select>
                                                                                                {% render 'select-arrow' %}
                                                                                            </div>
                                                                                        {% endfor %}
                                                                                    </div>
                                                                                {% when 'Felgi' %}
                                                                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); row-gap: 1rem;">
                                                                                        {% for i in (0..1) %}
                                                                                            <div class="form-field-wrapper">
                                                                                                <label for="{{ rim_fields_data_name[i] | downcase }}"
                                                                                                       class="field-label is-small">{{ rim_fields_label[i] }}</label>
                                                                                                <select
                                                                                                        id="{{ rim_fields_data_name[i] | downcase }}"
                                                                                                        data-name="{{ rim_fields_data_name[i] }}"
                                                                                                        required="required"
                                                                                                        class="select-field w-select {% if i == 0 %} {{ select_position[0] }} {% else %} {{ select_position[2] }} {% endif %}"></select>
                                                                                                {% render 'select-arrow' %}
                                                                                            </div>
                                                                                        {% endfor %}
                                                                                        {% for i in (2..3) %}
                                                                                            <div class="form-field-wrapper">
                                                                                                <label for="{{ rim_fields_data_name[i] | downcase }}"
                                                                                                       class="field-label is-small">{{ rim_fields_label[i] }}</label>
                                                                                                <select
                                                                                                        id="{{ rim_fields_data_name[i] | downcase }}"
                                                                                                        data-name="{{ rim_fields_data_name[i] }}"
                                                                                                        required="required"
                                                                                                        class="select-field w-select {% if i == 2 %} {{ select_position[0] }} {% else %} {{ select_position[2] }} {% endif %}"></select>
                                                                                                {% render 'select-arrow' %}
                                                                                            </div>
                                                                                        {% endfor %}
                                                                                    </div>
                                                                            {% endcase %}
                                                                        {% else %}
                                                                            <div class="ifnotselectedcar">
                                                                                {% assign form_fields = "Marka,Model,Generacja,Rok,Silnik" | split: "," %}
                                                                                {% for field in form_fields %}
                                                                                    <div class="form-field-wrapper">
                                                                                        <label for="car-{{ field | downcase }}"
                                                                                               class="field-label is-small">{{ field }}</label>
                                                                                        <select
                                                                                                id="car-{{ field | downcase }}"
                                                                                                data-name="car-{{ field | downcase }}"
                                                                                                required="required"
                                                                                                class="select-field w-select"></select>
                                                                                        {% render 'select-arrow' %}
                                                                                    </div>
                                                                                {% endfor %}
                                                                            </div>
                                                                            <div class="ifselectedcar is-right"
                                                                                 style="display: none">
                                                                                <div class="div-block-41">
                                                                                    <div class="text-size-small">
                                                                                        Twoje auto:
                                                                                    </div>
                                                                                    <div id="selected_car"
                                                                                         class="text-size-small text-weight-bold"></div>
                                                                                    <a id="change_car"
                                                                                       class="text-size-small">Zmień
                                                                                        auto</a>
                                                                                </div>
                                                                                <div class="form-field-wrapper">
                                                                                    <label for="matching_sizes"
                                                                                           class="field-label is-small">Pasujące
                                                                                        rozmiary</label>
                                                                                    <select id="matching_sizes"
                                                                                            class="select-field is-left w-select"></select>
                                                                                </div>
                                                                            </div>
                                                                        {% endif %}
                                                                        <input
                                                                                type="submit"
                                                                                data-wait="Zaczekaj..."
                                                                                class="button w-button"
                                                                                style="width: 100%"
                                                                                value="{% case tab_number %}{% when 1 %}{% case collection.title %}{% when 'Opony' %}Szukaj opon{% when 'Koła' %}Szukaj kół{% when 'Felgi' %}Szukaj felg{% endcase %}{% when 2 %}{% case collection.title %}{% when 'Opony' %}Szukaj opon{% when 'Koła' %}Szukaj kół{% when 'Felgi' %}Szukaj felg{% endcase %}{% endcase %}">
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>

                                    {% comment %} standard filters {% endcomment %}
                                    {% assign filters_do_not_display = "Szerokość opony,Profil opony,Średnica opony,Rozstaw śrub,Szerokość felgi,Średnica felgi" | split: "," %}
                                    <form id="filtersForm">
                                        {%- assign isTireFilters = false -%}
                                        {%- assign isRimFilters = false -%}

                                        {%- for filter in collection.filters -%}
                                            {%- unless filters_do_not_display contains filter.label -%}
                                                {%- if request.path contains 'collections/kola' -%}
                                                    {%- if filter.param_name contains 'tires' and isTireFilters == false -%}
                                                        {%- assign isTireFilters = true -%}
                                                        <hr style="border: 1px solid #000;">
                                                        <div class="text-size-medium text-weight-semibold">FILTRY OPON</div>
                                                    {%- elsif filter.param_name contains 'rims' and isRimFilters == false -%}
                                                        {%- assign isRimFilters = true -%}
                                                        {%- if isTireFilters == true -%}
                                                            <hr style="border: 1px solid #000;">
                                                        {%- endif -%}
                                                        <div class="text-size-medium text-weight-semibold">FILTRY FELG</div>
                                                    {%- endif -%}
                                                {%- endif -%}

                                                <details open class="filters2_filter-group">
                                                    <summary class="filters2_filter-group-heading">
                                                        <div class="text-size-medium text-weight-semibold">
                                                            {% if filter.label != 'Price' %}
                                                                <span>{{ filter.label }}</span>
                                                            {% else %}
                                                                <span>Cena</span>
                                                            {% endif %}

                                                            {%- if filter.active_values.size > 0 -%}
                                                                <span>({{ filter.active_values.size }})</span>
                                                            {%- endif -%}
                                                        </div>
                                                    </summary>

                                                    <div class="filters2_filter-options">
                                                        <div>
                                                            {%- if filter.active_values.size > 0 -%}
                                                                <p>
                                                                    <a href="{{ filter.url_to_remove }}">Zresetuj</a>
                                                                </p>
                                                            {%- endif -%}
                                                        </div>
                                                        {%- case filter.type -%}
                                                            {%- when 'boolean' -%}
                                                                <div class="filters2_list-wrapper">
                                                                    <div class="filters-list">
                                                                        <div class="filters2_item">
                                                                            <label for="Filter-{{ filter.param_name }}-{{ filter.true_value.value }}">
                                                                                <input
                                                                                        class="w-checkbox-input form-checkbox-icon{% if filter_value.active %} w-checkbox-input--inputType-custom w--redirected-checked{% endif %}"
                                                                                        type="checkbox"
                                                                                        name="{{ filter.param_name }}"
                                                                                        value="{{ filter.true_value.value }}"
                                                                                        id="Filter-{{ filter.param_name }}"
                                                                                        {% if filter.true_value.active -%}
                                                                                            checked{%- endif %}
                                                                                        {% if filter.true_value.count == 0 and filter.true_value.active == false -%}
                                                                                            disabled{%- endif %}
                                                                                        {% comment %}onchange="this.form.submit()"{% endcomment %}
                                                                                >
                                                                                {{ filter.true_value.label }}
                                                                            </label>
                                                                        </div>
                                                                        <div class="filteres2_item">
                                                                            <label for="Filter-{{ filter.param_name }}-{{ filter.false_value.value }}">
                                                                                <input
                                                                                        class="w-checkbox-input form-checkbox-icon{% if filter_value.active %} w-checkbox-input--inputType-custom w--redirected-checked{% endif %}"
                                                                                        type="checkbox"
                                                                                        name="{{ filter.param_name }}"
                                                                                        value="{{ filter.false_value.value }}"
                                                                                        id="Filter-{{ filter.param_name }}"
                                                                                        {% if filter.false_value.active -%}
                                                                                            checked{%- endif %}
                                                                                        {% if filter.false_value.count == 0 and filter.false_value.active == false -%}
                                                                                            disabled{%- endif %}
                                                                                        {% comment %}onchange="this.form.submit()"{% endcomment %}
                                                                                >
                                                                                {{ filter.false_value.label }}
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            {%- when 'list' -%}
                                                                <div class="filters2_list-wrapper">
                                                                    <div class="filters2_list">
                                                                        {%- if filter.param_name == 'filter.p.m.tires.years' -%}
                                                                            {%- assign sorted_values = filter.values | sort: 'value' | reverse -%}
                                                                        {%- else -%}
                                                                            {%- assign sorted_values = filter.values -%}
                                                                        {%- endif -%}

                                                                        {% comment %} Rims ET filter range min-max {% endcomment %}
                                                                        {% if filter.param_name == 'filter.p.m.rims.e_t' %}
                                                                            <div class="filter-group-display__price-range">
                                                                                <div class="filter-group-display__price-range-from">
                                                                                    <label for="minET"></label>
                                                                                    <input
                                                                                            name="filter.v.rims.e_t.gte"
                                                                                            class="form-input is-left-price"
                                                                                            style="width:100%"
                                                                                            id="minET"
                                                                                            type="number"
                                                                                            placeholder="od"
                                                                                            min="0"
                                                                                            step="0.1"
                                                                                    >
                                                                                </div>
                                                                                <div class="filter-group-display__price-range-to">
                                                                                    <label for="maxET"></label>
                                                                                    <input
                                                                                            name="filter.v.rims.e_t.lte"
                                                                                            id="maxET"
                                                                                            class="form-input is-right-price"
                                                                                            style="width:100%"
                                                                                            type="number"
                                                                                            placeholder="do"
                                                                                            min="0"
                                                                                            step="0.1"
                                                                                    >
                                                                                </div>
                                                                            </div>
                                                                            <div class="filter-group-display__submit" style="margin-top: 1rem">
                                                                                <input type="submit" value="Zastosuj" class="button is-link">
                                                                            </div>
                                                                        {% comment %} Tire years filter range min-max {% endcomment %}
                                                                        {% elsif filter.param_name == 'filter.p.m.tires.years' %}
                                                                            <div class="filter-group-display__price-range">
                                                                                <div class="filter-group-display__price-range-from">
                                                                                    <label for="minYear"></label>
                                                                                    <input
                                                                                            name="filter.v.tires.years.gte"
                                                                                            class="form-input is-left-price"
                                                                                            style="width:100%"
                                                                                            id="minYear"
                                                                                            type="number"
                                                                                            placeholder="od"
                                                                                    >
                                                                                </div>
                                                                                <div class="filter-group-display__price-range-to">
                                                                                    <label for="maxYear"></label>
                                                                                    <input
                                                                                            name="filter.v.tires.years.lte"
                                                                                            id="maxYear"
                                                                                            class="form-input is-right-price"
                                                                                            style="width:100%"
                                                                                            type="number"
                                                                                            placeholder="do"
                                                                                    >
                                                                                </div>
                                                                            </div>
                                                                            <div class="filter-group-display__submit" style="margin-top: 1rem">
                                                                                <input type="submit" value="Zastosuj" class="button is-link">
                                                                            </div>
                                                                        {% comment %} Normal filters {% endcomment %}
                                                                        {% else %}
                                                                            {%- for filter_value in sorted_values -%}
                                                                                <div class="filters2_item">
                                                                                        <label class="w-checkbox filters2_form-checkbox1"
                                                                                               for="Filter-{{ filter.param_name }}-{{ forloop.index }}">
                                                                                            <input
                                                                                                    class="w-checkbox-input form-checkbox-icon{% if filter_value.active %} w-checkbox-input--inputType-custom w--redirected-checked{% endif %}"
                                                                                                    type="checkbox"
                                                                                                    name="{{ filter_value.param_name }}"
                                                                                                    value="{{ filter_value.value }}"
                                                                                                    id="Filter-{{ filter.param_name }}-{{ forloop.index }}"
                                                                                                    {% if filter_value.active -%}
                                                                                                        checked{%- endif %}
                                                                                                    {% if filter_value.count == 0 and filter_value.active == false -%}
                                                                                                        disabled{%- endif %}
                                                                                                    {% comment %}onchange="this.form.submit()"{% endcomment %}
                                                                                            >
                                                                                            {{ filter_value.label }} ({{ filter_value.count }})
                                                                                        </label>
                                                                                </div>
                                                                            {%- endfor -%}
                                                                        {% endif %}
                                                                    </div>
                                                                </div>
                                                            {%- when 'price_range' -%}
                                                                <div class="filter-group-display__price-range">
                                                                    <div class="filter-group-display__price-range-from">
                                                                        <label for="Filter-price-from"></label>
                                                                        <input
                                                                                name="filter.v.price.gte"
                                                                                class="form-input is-left-price"
                                                                                style="width:100%"
                                                                                id="Filter-price-from"
                                                                                type="number"
                                                                                placeholder="od"
                                                                                min="0"
                                                                        >
                                                                    </div>
                                                                    <div class="filter-group-display__price-range-to">
                                                                        <label for="Filter-price-to"></label>
                                                                        <input
                                                                                name="filter.v.price.lte"
                                                                                id="Filter-price-to"
                                                                                class="form-input is-right-price"
                                                                                style="width:100%"
                                                                                type="number"
                                                                                placeholder="do"
                                                                                min="0"
                                                                        >
                                                                    </div>
                                                                </div>
                                                                <div class="filter-group-display__submit" style="margin-top: 1rem">
                                                                    <input type="submit" value="Zastosuj" class="button is-link">
                                                                </div>
                                                        {%- endcase -%}
                                                    </div>
                                                </details>
                                            {% endunless %}
                                        {%- endfor -%}
                                    </form>
                                </div>
                            </div>
                            <div class="filters2_tablet-modal-close-button w-inline-block">
                                <img src="https://assets-global.website-files.com/624380709031623bfe4aee60/624380709031623afe4aee7e_icon_close-modal.svg" alt="" class="icon-1x1-small">
                            </div>
                        </div>
                        <div class="product-wide_list">
                            <div class="filters2_feed-header">
                                <div class="filters_tags-wrapper">
                                    {%- comment -%} Capture the content for header containing the tracking data {%- endcomment -%}
                                    {%- capture contentForQuerystring -%}{{ content_for_header }}{%- endcapture -%}

                                    {% comment %} Use string splitting to pull the value from content_for_header and apply some string clean up {% endcomment %}
                                    {%- assign pageUrlWithoutHost = contentForQuerystring
                                            | split: '"pageurl":"' | last
                                            | split: '"' | first
                                            | split: '.myshopify.com' | last
                                            | replace: '\/', '/'
                                            | replace: '%20', ' '
                                            | replace: '\u0026', '&'
                                    -%}

                                    {% comment %}Page URL without a request host: {{ pageUrlWithoutHost }}{% endcomment %}
                                    {% comment %}/collections/opony?filter.p.m.tires.width=115&filter.p.m.tires.profile=80&filter.p.m.tires.diameter=16&filter.p.m.tires.season=Letnie{% endcomment %}

                                    {% assign show_custom_message = false %}

                                    {%- assign url_params = pageUrlWithoutHost | split: '&' -%}
                                    {%- assign min_et_param = '' -%}
                                    {%- assign max_et_param = '' -%}
                                    {%- assign min_year_param = '' -%}
                                    {%- assign max_year_param = '' -%}

                                    {%- for param in url_params -%}
                                        {%- if param contains 'filter.v.rims.e_t.gte=' -%}
                                            {%- assign min_et_param = param | split: 'filter.v.rims.e_t.gte=' | last -%}
                                        {%- endif -%}

                                        {%- if param contains 'filter.v.rims.e_t.lte=' -%}
                                            {%- assign max_et_param = param | split: 'filter.v.rims.e_t.lte=' | last -%}
                                        {%- endif -%}

                                        {%- if param contains 'filter.v.tires.years.gte=' -%}
                                            {%- assign min_year_param = param | split: 'filter.v.tires.years.gte=' | last -%}
                                        {%- endif -%}

                                        {%- if param contains 'filter.v.tires.years.lte=' -%}
                                            {%- assign max_year_param = param | split: 'filter.v.tires.years.lte=' | last -%}
                                        {%- endif -%}
                                    {%- endfor -%}

                                    {%- assign pageUrlWithoutETFilters = pageUrlWithoutHost
                                            | remove: '&filter.v.rims.e_t.gte=' | remove: min_et_param
                                            | remove: '&filter.v.rims.e_t.lte=' | remove: max_et_param
                                            | remove: 'filter.v.rims.e_t.gte=' | remove: min_et_param
                                            | remove: 'filter.v.rims.e_t.lte=' | remove: max_et_param
                                    -%}

                                    {%- assign pageUrlWithoutYearFilters = pageUrlWithoutHost
                                            | remove: '&filter.v.tires.years.gte=' | remove: min_year_param
                                            | remove: '&filter.v.tires.years.lte=' | remove: max_year_param
                                            | remove: 'filter.v.tires.years.gte=' | remove: min_year_param
                                            | remove: 'filter.v.tires.years.lte=' | remove: max_year_param
                                    -%}

                                    {% comment %} Collection filters {% endcomment %}
                                    {%- for filter in collection.filters -%}
                                        {%- if filter.type == "price_range" -%}
                                            {%- if filter.min_value.value != null or filter.max_value.value != null -%}
                                                <div class="filters_tag-wrap">
                                                    Cena:
                                                    <a class="filters_tag" href="{{ filter.url_to_remove }}">
                                                        {%- assign min_value = filter.min_value.value | default: 0 -%}
                                                        {%- assign max_value = filter.max_value.value | default: filter.range_max -%}
                                                        {{ min_value | money }} - {{ max_value | money }} <img
                                                                src="{{ 'IcRoundCloseBlack.svg' | asset_url }}"
                                                                class="icon-embed-xxsmall">
                                                    </a>
                                                </div>
                                            {%- endif -%}
                                        {%- else -%}
                                            {%- for filter_value in filter.active_values -%}
                                                <div class="filters_tag-wrap text-size-small">
                                                    {{ filter.label }}:
                                                    <a href="{{ filter_value.url_to_remove }}"
                                                       class="filters_tag">{{ filter_value.label }}
                                                        <img
                                                            src="{{ 'IcRoundCloseBlack.svg' | asset_url }}"
                                                            class="icon-embed-xxsmall"
                                                            alt="delete-param">
                                                    </a>
                                                </div>
                                            {%- endfor -%}

                                            {%- if filter.active_values.size == 0 and pageUrlWithoutHost contains filter.param_name -%}
                                                {%- assign filter_param_value = pageUrlWithoutHost | split: filter.param_name | last | split: '&' | first | split: '=' | last -%}
                                                <div class="filters_tag-wrap text-size-small">
                                                    {{ filter.label }}:
                                                    <a href="{{ filter.url_to_remove }}"
                                                       class="filters_tag" style="color: red;">{{ filter_param_value }}
                                                        <img
                                                            src="{{ 'IcRoundCloseBlack.svg' | asset_url }}"
                                                            class="icon-embed-xxsmall"
                                                            alt="delete-param">
                                                    </a>
                                                </div>
                                                {% assign show_custom_message = true %}
                                            {%- endif -%}
                                        {%- endif -%}
                                    {%- endfor -%}

                                    {% comment %} Custom filters (ET) {% endcomment %}
                                    {%- if min_et_param != blank or max_et_param != blank -%}
                                        <div class="filters_tag-wrap text-size-small">
                                            Osadzenie (ET):
                                            <a href="{{ pageUrlWithoutETFilters }}" class="filters_tag">
                                                {{ min_et_param | default: 0 }} - {{ max_et_param | default: 100 }}
                                                <img
                                                        src="{{ 'IcRoundCloseBlack.svg' | asset_url }}"
                                                        class="icon-embed-xxsmall"
                                                        alt="delete-param">
                                            </a>
                                        </div>
                                    {%- endif -%}

                                    {% comment %} Custom filters (Years) {% endcomment %}
                                    {%- if min_year_param != blank or max_year_param != blank -%}
                                        <div class="filters_tag-wrap text-size-small">
                                            Rocznik produkcji opon:
                                            <a href="{{ pageUrlWithoutYearFilters }}" class="filters_tag">
                                                {% assign current_year = "now" | date: "%Y" %}

                                                {{ min_year_param | default: 2020 }} - {{ max_year_param | default: current_year }}
                                                <img
                                                        src="{{ 'IcRoundCloseBlack.svg' | asset_url }}"
                                                        class="icon-embed-xxsmall"
                                                        alt="delete-param">
                                            </a>
                                        </div>
                                    {%- endif -%}
                                </div>
                                <div class="filters2_results-wrapper">
                                    <div class="filters2_results-text">
                                        {% comment %} Check custom filters count {% endcomment %}
                                        {% assign visible_products_count = 0 %}
                                        {% for product in collection.products %}
                                            {% comment %} Rims ET parameters {% endcomment %}
                                            {% assign rims_e_t = product.metafields.rims.e_t | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}

                                            {% comment %} Tires year parameters {% endcomment %}
                                            {% assign tire_years = product.metafields.tires.years | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}

                                            {% comment %} Check if ET param or Year param exist and compare {% endcomment %}
                                            {% capture display_product %}true{% endcapture %}
                                            {% if min_et_param != blank or max_et_param != blank %}
                                                {% assign rim_et_value_1 = rims_e_t[0] | default: 0 %}
                                                {% assign rim_et_value_2 = rims_e_t[1] | default: 0 %}
                                                {% if rim_et_value_1 < min_et_param or rim_et_value_1 > max_et_param %}
                                                    {% if rim_et_value_2 < min_et_param or rim_et_value_2 > max_et_param %}
                                                        {% capture display_product %}false{% endcapture %}
                                                    {% endif %}
                                                {% endif %}
                                            {% endif %}

                                            {% if min_year_param != blank or max_year_param != blank %}
                                                {% assign display_product = "false" %}
                                                {% for year in tire_years %}
                                                    {% if year >= min_year_param and year <= max_year_param %}
                                                        {% capture display_product %}true{% endcapture %}
                                                        {% break %}
                                                    {% endif %}
                                                {% endfor %}
                                            {% endif %}

                                            {% if display_product == "true" %}
                                                {% assign visible_products_count = visible_products_count | plus: 1 %}
                                            {% endif %}
                                        {% endfor %}

                                        {% if paginate %}
                                            {% comment %}Wyświetlam {{ paginate.page_size | times: paginate.current_page | minus: paginate.page_size | plus: 1 }} - {{ paginate.items | size }} z {{ paginate.items_count }} wyników{% endcomment %}
                                            Wyświetlam {{ paginate.page_size | times: paginate.current_page | minus: paginate.page_size | plus: 1 }} - {{ visible_products_count | plus: paginate.page_size | times: paginate.current_page | minus: paginate.page_size }} z {{ visible_products_count }} wyników
                                        {% else %}
                                            {% comment %}Wyświetlam {{ collection.products.count }} z {{ collection.products_count }} wyników{% endcomment %}
                                            Wyświetlam {{ visible_products_count }} wyników
                                        {% endif %}
                                    </div>
                                </div>
                            </div>

                            {% for product in collection.products %}
                                {% assign vehicle_type = product.metafields.custom.type %}

                                {% comment %} Tires main parameters {% endcomment %}
                                {% assign tires_width = product.metafields.tires.width | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}
                                {% assign tires_profile = product.metafields.tires.profile | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}
                                {% assign tires_diameter = product.metafields.tires.diameter | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}

                                {% comment %} Rims main parameters {% endcomment %}
                                {% assign rims_diameter = product.metafields.rims.diameter | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}
                                {% assign rims_e_t = product.metafields.rims.e_t | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}
                                {% assign rims_width = product.metafields.rims.width | remove: '"' | remove: '[' | remove: ']' | strip | split: ',' %}

                                {% comment %} Two different tires? {% endcomment %}
                                {% capture double_parameters_tires %}{% if tires_width.size > 1 or tires_profile.size > 1 or tires_diameter.size > 1 %}true{% else %}false{% endif %}{% endcapture %}
                                {% comment %}{{ double_parameters_tires }}{% endcomment %}

                                {% comment %} Two different rims? {% endcomment %}
                                {% capture double_parameters_rims %}{% if rims_diameter.size > 1 or rims_e_t.size > 1 or rims_width.size > 1 %}true{% else %}false{% endif %}{% endcapture %}
                                {% comment %}{{ double_parameters_rims }}{% endcomment %}

                                {% comment %} Check if ET param exist and compare {% endcomment %}
                                {% capture display_product %}true{% endcapture %}
                                {% if min_et_param != blank or max_et_param != blank %}
                                    {% assign rim_et_value_1 = rims_e_t[0] | default: 0 %}
                                    {% assign rim_et_value_2 = rims_e_t[1] | default: 0 %}

                                    {% if rim_et_value_1 < min_et_param or rim_et_value_1 > max_et_param %}
                                        {% if rim_et_value_2 < min_et_param or rim_et_value_2 > max_et_param %}
                                            {% capture display_product %}false{% endcapture %}
                                        {% endif %}
                                    {% endif %}
                                {% endif %}

                                {% comment %} Check if tire years param exist and compare {% endcomment %}
                                {% if min_year_param != blank or max_year_param != blank %}
                                    {% assign tire_years = product.metafields.tires.years | remove: '"' | remove: '[' | remove: ']' | split: ',' %}
                                    {% assign display_product = "true" %}

                                    {% for tire_year in tire_years %}
                                        {% if tire_year < min_year_param or tire_year > max_year_param %}
                                            {% assign display_product = "false" %}
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}

                                {% if display_product == "true" %}
                                    {% assign visible_products_count = visible_products_count | plus: 1 %}
                                {% endif %}

                                {% if display_product == "true" %}
                                    <div class="product-wide shadow-xsmall">
                                        <a href="{{ product.url }}" class="product_content-wrapper w-inline-block">
                                            {% if product.collections[0].handle == "opony" %}
                                                <div class="div-block-47">
                                                    <div class="heading-style-h4">{{ product.metafields.tires.manufacturer.value.name.value }}</div>
                                                    <div class="div-block-46">
                                                        <div class="text-size-large text-weight-semibold">{{ product.metafields.tires.model.value.model.value }}</div>
                                                        <div class="text-size-large text-weight-semibold">
                                                            {% if double_parameters_tires == 'true' %}
                                                                2x {{ tires_width[0] }}/{{ tires_profile[0] }} R{{ tires_diameter[0] }}{% if vehicle_type == 'Dostawcze' %}C{% elsif vehicle_type == 'Kempingowe' %}CP{% endif %},
                                                                2x
                                                                {% if tires_width[1] == blank %}{{ tires_width[0] }}{% else %}{{ tires_width[1] }}{% endif %}/{% if tires_profile[1] == blank %}{{ tires_profile[0] }}{% else %}{{ tires_profile[1] }}{% endif %} R{% if tires_diameter[1] == blank %}{{ tires_diameter[0] }}{% else %}{{ tires_diameter[1] }}{% endif %}{% if vehicle_type == 'Dostawcze' %}C{% elsif vehicle_type == 'Kempingowe' %}CP{% endif %}
                                                                {% comment %}{{ product.metafields.tires.load_index | slice: 0, 3 | rstrip }} {{ product.metafields.tires.speed_index | slice: 0 }}{% endcomment %}
                                                            {% else %}
                                                                {{ product.metafields.custom.quantity | slice: 0 }}x {{ tires_width[0] }}/{{ tires_profile[0] }} R{{ tires_diameter[0] }}{% if vehicle_type == 'Dostawcze' %}C{% elsif vehicle_type == 'Kempingowe' %}CP{% endif %}
                                                                {% comment %}{{ product.metafields.tires.load_index | slice: 0, 3 | rstrip }}{{ product.metafields.tires.speed_index | slice: 0 }}{% endcomment %}
                                                            {% endif %}
                                                        </div>
                                                    </div>
                                                    <div class="product_parameters-wrapper">
                                                        {% if product.metafields.tires.tread != blank %}
                                                            <div class="product_parameters">
                                                                <div class="tooltip1_component">
                                                                    <div class="tooltip1_tooltip-wrapper">
                                                                        <div class="tooltip1_card-wrapper">
                                                                            <div class="text-size-tiny text-weight-semibold">
                                                                                Ilość pozostałego bieżnika w oponach
                                                                            </div>
                                                                        </div>
                                                                        <div class="tooltip1_pointer"></div>
                                                                    </div>
                                                                    <div class="tooltip1_element-wrapper"
                                                                         data-relume-tooltip-setup="1">
                                                                        <div class="text-size-tiny text-weight-semibold">{{ product.metafields.tires.tread }}</div>
                                                                    </div>
                                                                    <div class="tooltip1_responsive"></div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                        {% if product.metafields.tires.years != blank %}
                                                            <div class="product_parameters is-last">
                                                                <div class="tooltip1_component">
                                                                    <div class="tooltip1_tooltip-wrapper">
                                                                        <div class="tooltip1_card-wrapper">
                                                                            <div class="text-size-tiny text-weight-semibold">
                                                                                Rocznik produkcji opon z wybranej oferty
                                                                            </div>
                                                                        </div>
                                                                        <div class="tooltip1_pointer"></div>
                                                                    </div>
                                                                    <div class="tooltip1_element-wrapper"
                                                                         data-relume-tooltip-setup="1">
                                                                        <div class="text-size-tiny text-weight-semibold">{{ product.metafields.tires.years | remove: '"' | remove: '[' | remove: ']' | split: ',' | join: ' | ' | strip }}</div>
                                                                    </div>
                                                                    <div class="tooltip1_responsive"></div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                    </div>
                                                    {% comment %}
                                                    <div class="product_parameters-wrapper">
                                                        {% if product.metafields.tires.load_index != blank %}
                                                            <div class="product_parameters">
                                                                <div class="tooltip1_component">
                                                                    <div class="tooltip1_tooltip-wrapper">
                                                                        <div class="tooltip1_card-wrapper">
                                                                            <div class="text-size-tiny text-weight-semibold">{{ product.metafields.tires.load_index }}
                                                                                . Indeks nośności, czyli maksymalne
                                                                                obciążenie pojedynczej opony
                                                                            </div>
                                                                        </div>
                                                                        <div class="tooltip1_pointer"></div>
                                                                    </div>
                                                                    <div class="tooltip1_element-wrapper"
                                                                         data-relume-tooltip-setup="1">
                                                                        <div class="text-size-tiny text-weight-semibold">{{ product.metafields.tires.load_index | slice: 0, 3 | rstrip }}</div>
                                                                    </div>
                                                                    <div class="tooltip1_responsive"></div>
                                                                </div>
                                                            </div>
                                                        {% endif %}
                                                        {% if product.metafields.tires.speed_index != blank %}
                                                            <div data-tippy-content="{{ product.metafields.tires.speed_index }}. Indeks prędkości, czyli maksymalna prędkość, do której przystosowana jest opona"
                                                                 class="product_parameters is-last">
                                                                <div class="text-size-tiny text-weight-semibold">{{ product.metafields.tires.speed_index | slice: 0 }}</div>
                                                            </div>
                                                        {% endif %}
                                                    </div>
                                                    {% endcomment %}
                                                </div>
                                            {% elsif product.collections[0].handle == 'felgi' %}
                                                <div class="div-block-47">
                                                    <div class="heading-style-h4">{{ product.metafields.rims.manufacturer.value.name.value }}</div>
                                                    <div class="div-block-46">
                                                        <div class="text-size-large text-weight-semibold">{{ product.metafields.rims.model.value.model.value }}</div>
                                                        <div class="text-size-large text-weight-semibold">
                                                            {% if double_parameters_rims == 'true' %}
                                                                2x R{{ rims_diameter[0] }}x{{ rims_width[0] }}J ET{{ rims_e_t[0] }},
                                                                2x
                                                                R{% if rims_diameter[1] == blank %}{{ rims_diameter[0] }}{% else %}{{ rims_diameter[1] }}{% endif %}x{% if rims_width[1] == blank %}{{ rims_width[0] }}{% else %}{{ rims_width[1] }}{% endif %} ET{% if rims_e_t[1] == blank %}{{ rims_e_t[0] }}{% else %}{{ rims_e_t[1] }}{% endif %}
                                                            {% else %}
                                                                {{ product.metafields.custom.quantity | slice: 0 }}x R{{ rims_diameter[0] }}x{{ rims_width[0] }}J ET{{ rims_e_t[0] }}
                                                            {% endif %}
                                                            {{ product.metafields.rims.bolt_spacing }}
                                                        </div>
                                                    </div>
                                                    <div class="product_parameters-wrapper"></div>
                                                    <div class="product_parameters-wrapper"></div>
                                                </div>
                                            {% elsif product.collections[0].handle == 'akcesoria' or  product.collections[0].handle == 'kola' or product.collections[0].handle == 'kola-dojazdowe' %}
                                                <div class="div-block-47">
                                                    <div class="heading-style-h4">{{ product.title }}</div>
                                                </div>
                                            {% endif %}
                                            <div class="margin-top margin-xsmall">
                                                <div class="product_pictures-wrapper">
                                                    <div class="product_season-wrapper">
                                                        {% if product.metafields.tires.season.value == 'Letnie' %}
                                                            <img
                                                                    src="{{ 'IcRoundSun.svg' | asset_url }}"
                                                                    class="icon-embed-small"
                                                                    alt="summer-icon">
                                                        {% elsif product.metafields.tires.season.value == 'Zimowe' %}
                                                            <img
                                                                    src="{{ 'IcRoundWinter.svg' | asset_url }}"
                                                                    class="icon-embed-small"
                                                                    alt="winter-icon">
                                                        {% elsif product.metafields.tires.season.value == 'Całoroczne' %}
                                                            <img
                                                                    src="{{ 'IcRoundAllSeason.svg' | asset_url }}"
                                                                    class="icon-embed-small"
                                                                    alt="year-round-icon">
                                                        {% endif %}
                                                    </div>
                                                    {% if product.collections[0].handle == 'opony' or product.collections[0].handle == 'kola' %}
                                                        <div class="product_badge-wrapper">
                                                            <div class="text-size-small text-weight-bold text-color-white">
                                                                Klasa {{ product.metafields.tires.model.value.marka.value.class.value }}</div>
                                                        </div>
                                                    {% endif %}
                                                    <div class="product_image-wrapper">
                                                        {% if product.featured_image %}
                                                            <img
                                                                    src="{{ product.featured_image | image_url: width: 800 }}"
                                                                    alt="{{ product.title }}"
                                                                    class="image-2">
                                                        {% elsif product.collections[0].handle == 'opony' and product.metafields.tires.model.value.zdjecie.value != blank %}
                                                            <img
                                                                    src="{{ product.metafields.tires.model.value.zdjecie.value | image_url: width: 800 }}"
                                                                    alt="{{ product.title }}"
                                                                    class="image-2">
                                                        {% elsif product.collections[0].handle == 'felgi' and product.metafields.rims.model.value.zdjecie.value != blank %}
                                                            <img
                                                                    src="{{ product.metafields.rims.model.value.zdjecie.value | image_url: width: 800 }}"
                                                                    alt="{{ product.title }}"
                                                                    class="image-2">
                                                        {% else %}
                                                            <img
                                                                    src="{{ 'ProductPlaceholder.webp' | asset_url }}"
                                                                    alt="{{ product.title }}"
                                                                    class="image-2">
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                        <div class="product_info-wrapper">
                                            <div class="product_price-wrapper">
                                                <div class="div-block-39">
                                                    <div class="heading-style-h4 text-color-red600">{{ product.price | money }}
                                                        <span class="text-size-regular">
                                                            / {{ product.metafields.custom.quantity }}
                                                        </span>
                                                    </div>
                                                </div>
                                                <div class="add-delivery-text"></div>
                                                <div class="product_green-wrapper">
                                                    <p class="text-size-small text-color-green">Możliwość montażu
                                                        <span class="text-weight-semibold">w serwisie</span>
                                                    </p>
                                                </div>
                                                <div class="product_green-wrapper">
                                                    <p class="text-size-small text-color-green">Możliwość zakupu<span
                                                                class="text-weight-semibold"> na raty</span></p>
                                                </div>
                                            </div>
                                            <div class="product-header1_add-to-cart w-form">
                                                <form method="post" action="/cart/add">
                                                    <input
                                                            type="hidden"
                                                            name="id"
                                                            value="{{ product.variants.first.id }}">
                                                    <input
                                                            type="submit"
                                                            value="Dodaj do koszyka"
                                                            class="button max-width-full">
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% else %}
                                {% if show_custom_message %}
                                    <p>Przykro nam!<br>
                                        Nie znaleźliśmy produktów w wybranej konfiguracji.<br>
                                        Usuń wybrane filtry, aby rozszerzyć wyszukanie.</p>
                                {% endif %}
                                <p>Brak produktów w tej kolekcji.</p>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script type="text/javascript" src="{{ 'collection-filters.js' | asset_url }}"></script>
<script type="text/javascript" src="{{ 'filters.js' | asset_url }}"></script>
<script type="text/javascript" src="{{ 'tooltip.js' | asset_url }}"></script>
<script type="text/javascript" src="{{ 'delivery.js' | asset_url }}"></script>

{% stylesheet %}
.filters-list {
    list-style: none;
    align-items: flex-start;
    margin-bottom: 0;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    padding-left: 0;
    display: flex;
    flex-direction: column;
}

.filters_tag-wrap {
    align-items: center;
    display: flex;
    grid-column-gap: 0.5rem;
    grid-row-gap: 0.5rem;
    font-weight: 500;
}

.filters_tag {
    background-color: var(--color--white);
    text-decoration: none;
    color: var(--color-black);
    border-radius: 0.25rem;
    align-items: center;
    padding: 0.5rem 0.75rem 0.5rem 1rem;
    display: flex;
    grid-column-gap: 0.25rem;
    grid-row-gap: 0.25rem;
}

.filters_tags-wrapper {
    grid-column-gap: 0.5rem;
    grid-row-gap: 0.5rem;
    flex-wrap: wrap;
    flex: 1;
    align-items: flex-start;
    margin-right: 2rem;
    display: flex;
}

.filter-group-display__price-range {
    display: flex;
    margin-top: calc(-1rem - 1px);
    margin-right: calc(-1rem - 1px);
    margin-left: calc(-1rem - 1px);
}

{% endstylesheet %}

{% schema %}
{
  "name": "Filtry kolekcji",
  "class": "section_filters2",
  "tag": "section",
  "limit": 1,
  "enabled_on": {
    "templates": [
      "collection"
    ]
  },
  "settings": [
    {
      "type": "richtext",
      "id": "filtry-kolekcji",
      "label": "Filtry kolekcji"
    }
  ],
  "presets": [
    {
      "name": "Filtry kolekcji"
    }
  ]
}
{% endschema %}