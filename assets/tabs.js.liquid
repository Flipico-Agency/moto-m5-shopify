document.addEventListener('DOMContentLoaded', function() {
    // Selecting top level tabs and their content areas.
    const topTabs = document.querySelectorAll('.tab-link-top-search');
    const topTabContents = document.querySelectorAll('.w-tab-pane');

    // Function to clear all active states.
    function clearActiveStates(elements) {
        elements.forEach(element => {
            element.classList.remove('w--current');
        });
    }

    // Function to hide all tab content areas.
    function hideAllTabContents(contents) {
        contents.forEach(content => {
            content.style.display = 'none';
        });
    }

    // Function to show the selected tab's content and make the tab active.
    function activateTab(tab) {
        const targetTab = tab.getAttribute('data-w-tab');
        const targetContent = document.querySelector(`.tab-pane-tab-${targetTab}`);

        clearActiveStates(topTabs);
        hideAllTabContents(topTabContents);

        tab.classList.add('w--current');
        if (targetContent) {
            targetContent.style.display = 'block';

            // Activating the first sub-tab and its content for the selected top-level tab.
            const firstSubTab = targetContent.querySelector('.tab-link-left-search');
            const firstSubTabContent = targetContent.querySelector('.w-tab-pane');

            if (firstSubTab && firstSubTabContent) {
                clearActiveStates(targetContent.querySelectorAll('.tab-link-left-search'));
                hideAllTabContents(targetContent.querySelectorAll('.w-tab-pane'));

                firstSubTab.classList.add('w--current');
                firstSubTabContent.style.display = 'block';
            }
        }
    }

    // Event listeners for top level tabs.
    topTabs.forEach(tab => {
        tab.addEventListener('click', () => activateTab(tab));
    });

    // Activating the first top level tab and its content on page load.
    if (topTabs.length > 0) {
        activateTab(topTabs[0]);
    }

    // Selecting and managing sub-tabs within each top level tab.
    topTabContents.forEach(tabContent => {
        const subTabs = tabContent.querySelectorAll('.tab-link-left-search');
        const subTabContents = tabContent.querySelectorAll('.w-tab-pane');

        subTabs.forEach(subTab => {
            subTab.addEventListener('click', () => {
                clearActiveStates(subTabs);
                hideAllTabContents(subTabContents);

                const subTargetTab = subTab.getAttribute('data-w-tab');
                const subTargetContent = tabContent.querySelector(`[data-w-tab="${subTargetTab}"]`);

                subTab.classList.add('w--current');
                if (subTargetContent) {
                    subTargetContent.style.display = 'block';
                }
            });
        });
    });
});